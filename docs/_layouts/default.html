<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
</head>
<body class="font-sans antialiased text-gray-900 bg-white">
  {% include header.html %}
  <main>
    {{ content }}
  </main>
  {% include footer.html %}
  {% unless site.app_store_live %}
  <script>
  function submitWaitlist(e, form) {
    e.preventDefault();
    var email = form.querySelector('input[name="email"]').value;
    var btn = form.querySelector('button[type="submit"]');
    var parent = form.parentElement;
    btn.disabled = true;
    btn.textContent = 'Sending...';
    fetch('https://formsubmit.co/ajax/fieldpad@fieldpadpro.com', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
      body: JSON.stringify({ email: email, _subject: 'FieldPad Waitlist Signup' })
    })
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (data.success) {
        form.classList.add('hidden');
        parent.querySelector('.waitlist-success').classList.remove('hidden');
      } else {
        parent.querySelector('.waitlist-error').classList.remove('hidden');
        btn.disabled = false;
        btn.textContent = 'Join Waitlist';
      }
    })
    .catch(function() {
      parent.querySelector('.waitlist-error').classList.remove('hidden');
      btn.disabled = false;
      btn.textContent = 'Join Waitlist';
    });
    return false;
  }
  </script>
  {% endunless %}
</body>
</html>
